# 🏛️ Ethan Miller LLP 律师事务所网站 1:1 像素级复刻项目（V2 优化方案）

> 目标：在视觉、交互与响应式上实现与 https://aekhw.com/ 完全一致（像素级）。并提供可验证的自动化校验方案与可复现的构建过程。

---

## 0. 参数锁定（已确认）

- 像素差阈值：≤ 0.1%（更严格）
- 断点集合：320, 360, 375, 414, 768, 1024, 1280, 1440, 1536, 1920 px
- 字体策略：Raleway 全字重（100–900，含 italic）100% 全量不裁剪
- 资源命名：保持原始文件名（验收以原名为准；构建阶段可生成带指纹版本，但非验收标准）
- 性能策略：完全与原站一致（严格复制，不做主动优化）

---

## 1. 成功标准（可量化验收）

- 像素对比（Pixel-to-Pixel）：
  - 视口集合：320, 360, 375, 414, 768, 1024, 1280, 1440, 1536, 1920 px。
  - 单页像素差阈值：≤ 0.1%（基于 pixelmatch 或类似算法，阈值<=0.1，Anti-alias 补偿开启）。
- 计算样式一致性：
  - 关键节点（导航、标题、正文、按钮、卡片、页脚）ComputedStyle 关键属性（font-family/size/weight/line-height/letter-spacing/color/background/margin/padding/border/shadow/transform/transition）逐项对齐，允许浮点误差±0.5px。
- 交互一致性：
  - 菜单 hover/focus/展开收起、轮播切换节奏与 easing、视频自适应与播放控制、平滑滚动行为 与 原站一致（时间、缓动曲线、延迟均比对）。
- 响应式一致性：
  - 媒体查询断点集合与原站完全一致；同一断点下布局不发生换行/溢出差异。
- 资源一致性：
  - 图片/视频/字体均为本地托管副本，尺寸与编码参数匹配（或高于）原站；字体家族与字重覆盖一致。

---

## 2. 版本锁定与依赖镜像

- JS 运行时：
  - jQuery = 3.6.0（锁定）
  - jQuery Migrate = 3.3.2（锁定）
  - FlexSlider = 2.7.2（锁定）
  - 其余自定义脚本按原站顺序与依赖关系加载（defer/async 策略与原站一致）。
- CSS/字体：
  - 保留原 CSS 文件切分与加载顺序；生产阶段如需合并/指纹化（.min.css?ver=hash）仅用于缓存，不改变验收口径。
- 资源命名：
  - 保持原始文件名（便于人工对照与差异定位）；构建阶段可额外生成内容指纹版供缓存但不作为验收基准。

---

## 3. 资源本地化与清单管理

- 资源清单 manifest.json（自动生成）：
  - images：路径、尺寸、原 MIME、目标 MIME、hash（如生成指纹版）。
  - videos：编码（H.264/AAC 或原站规格）、比特率、分辨率、自适应策略。
  - fonts：家族、字重、样式、格式、unicode-range（当前不做子集，仅记录）。
  - css/js：来源 URL、依赖顺序、指纹（如生成）。
- 下载策略：
  - 逐一确认 200/206 响应；若 CDN 阻拦，采用浏览器采集回落方案。
  - 保持源尺寸与编码；视频必要时转码为 mp4(H.264 Baseline/Main/High) + webm 备选，优先与原站一致。
- 字体策略：
  - 优先 woff2，自托管；保留本地缓存 fallback；严格排列 font-family、font-display、font-feature-settings，确保度量一致。
  - 不进行子集化，保留全量字形与所有字重/斜体。

---

## 4. 媒体查询断点与布局网格

- 断点提取：
  - 从原站 CSS 自动解析所有 `@media (min|max-width: Xpx)`，生成断点集合（去重排序）。
  - 验收：断点集合与原站比对全等；每个断点进行页面快照与 pixeldiff。
- 布局网格与间距标尺：
  - 提取关键容器宽度、列间距（gutter）、外边距（margin）、内边距（padding），固化为 CSS 变量（spacing scale）。
  - 所有尺寸单位与原站一致（px/rem）；若原站混用，结果保持一致。

---

## 5. 排版体系与渲染细节

- 字体：Raleway 为主（100–900，含 italic），辅助 Roboto、Archivo Narrow。
- 基线网格：
  - 提取不同断点下的 root font-size 与 line-height；建立 type scale（标题、正文、引文、按钮）。
- 渲染一致性：
  - 可按需对齐 font-smoothing：`-webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;`（仅在验证不破坏对齐的情况下采用）。
  - letter-spacing、word-spacing 与原站一致；中文/西文混排场景下保留原策略。

---

## 6. 动画与交互参数归一

- 动画/过渡参数表：
  - 逐项采集 transition-duration、transition-delay、timing-function（ease/cubic-bezier）、transform 关键帧。
  - 统一为 CSS 变量与 JS 常量，避免误差与散落定义。
- 组件清单：
  - 导航（多级下拉/hover/focus/键盘导航）
  - 轮播（FlexSlider：切换方式、自动播放间隔、分页/箭头）
  - 视频（桌面/移动差异、poster、muted/autoplay/playsinline 策略）
  - 平滑滚动（时长/偏移）
  - 表单（校验规则、错误样式、提交交互）

---

## 7. 构建产物与目录结构

```
mogenlaw/
├─ index.html
├─ pages/
│  ├─ about.html
│  ├─ practice-areas.html
│  ├─ team.html
│  ├─ news.html
│  └─ contact.html
├─ assets/
│  ├─ css/
│  │  ├─ style.css
│  │  ├─ responsive.css
│  │  ├─ flexslider.css
│  │  ├─ theme.css
│  │  └─ tokens.css            # 变量：颜色/间距/动画/断点
│  ├─ js/
│  │  ├─ jquery-3.6.0.min.js
│  │  ├─ jquery-migrate-3.3.2.min.js
│  │  ├─ jquery.flexslider-2.7.2.min.js
│  │  └─ app.js
│  ├─ images/
│  │  └─ slideshow/
│  ├─ videos/
│  │  ├─ desktop/
│  │  └─ mobile/
│  └─ fonts/
├─ tools/                      # 自动化校验/抓取脚本（后续添加）
└─ manifest.json               # 资源清单（自动生成）
```

---

## 7.1 路由映射表（建议，待您确认）

> 按“先查项目路由再改文件”的原则，先确认 URL → 本地文件的映射：

- `/` → `index.html`
- `/about-us/` → `pages/about.html`
- `/practice-areas/` → `pages/practice-areas.html`
- `/our-team/` → `pages/team.html`
- `/news/` → `pages/news.html`
- `/contact/` → `pages/contact.html`

如原站存在更细分栏目（如新闻详情、团队成员详情），建议采用：
- `/news/<slug>/` → `pages/news/<slug>.html`
- `/team/<member>/` → `pages/team/<member>.html`

请您确认以上映射或告知需要更精确/不同的 URL 结构。

---

## 8. 自动化校验工作流（可重复）

- 快照采集：
  - 使用浏览器自动化在目标断点对原站与本地站生成截图。
- 像素对比：
  - 使用 pixelmatch（或等效库）生成差异图与差异比率报告（JSON + PNG）。
- 样式对比：
  - 采集关键节点 ComputedStyle，输出对比表（差异高亮）。
- 交互对比：
  - 脚本化 hover/focus/click/scroll，记录动画帧时间线与结束状态，进行比对。

---

## 9. 性能与可访问性（与原站严格对齐）

- 性能策略：
  - 完全与原站一致（严格复制，不做主动优化）。
- 可访问性：
  - Tab 顺序、ARIA 角色、可见焦点，与原站行为一致为优先（不弱于原站）。

---

## 10. 法律与合规提示

- 本项目为 1:1 复刻，涉及第三方图片/视频/字体等资源再分发风险；建议用于内部演示/学习或取得授权后再公开部署。

---

## 11. 里程碑与交付物

- M1 资源清单与本地化完成（含 manifest.json、目录结构搭建）
- M2 HTML/CSS/JS 结构与基础交互完成
- M3 响应式与动画细节对齐、像素对比阈值达标
- M4 全站验收报告（像素差报告 + 样式对比 + 交互对比）

交付物：源代码、资源文件、本地对比脚本、验收报告

---

## 12. 当前进度与下一步

- 已完成：
  - 原站结构/资源初步分析
  - V2 优化方案制定（本文件）
- 待执行（建议顺序，待您确认）：
  1) 补充并确认“路由映射表”（原站 URL → 本地文件路径）
  2) 生成资源清单 manifest.json 并开始下载（图片/视频/字体）
  3) 抽取媒体查询断点集合
  4) 抽取关键节点 ComputedStyle 基线

---

## 13. 执行清单（逐项打勾）

- [ ] 路由映射表：URL → 本地文件路径确认
- [ ] 资产抓取：images/videos/fonts 列表与来源 URL 确认
- [ ] 断点集合：媒体查询自动解析并锁定
- [ ] 字体家族：Raleway 全字重与 italic 本地化验证
- [ ] 目录落盘：assets/pages/tools/manifest.json 初始化
- [ ] 交互参数：transition/easing/interval 采集成表
- [ ] 快照对比：原站/本地 9 个断点像素比对跑通

---

（本文档将随执行实时更新，版本：V2）